<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cssSaferoads.css">
    <!-- Font Awesome Free CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script src="jsSaferoads.js"></script>
    <title>Settings - SafeRoad AI</title>
    <style>
        .settings-container {
            max-width: 900px;
        }
        .settings-section {
            background: #fff;
            padding: 25px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .settings-section h2 {
            margin-top: 0;
            margin-bottom: 20px;
            color: #1e2e38;
            border-bottom: 2px solid #1e88e5;
            padding-bottom: 10px;
        }
        .settings-group {
            margin-bottom: 25px;
        }
        .settings-group:last-child {
            margin-bottom: 0;
        }
        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        .settings-item:last-child {
            border-bottom: none;
        }
        .settings-label {
            flex: 1;
        }
        .settings-label h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
            color: #1e2e38;
            font-weight: 600;
        }
        .settings-label p {
            margin: 0;
            font-size: 13px;
            color: #666;
        }
        .settings-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 26px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #1e88e5;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        .settings-input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            width: 200px;
            transition: border-color 0.2s ease;
        }
        .settings-input:focus {
            outline: none;
            border-color: #1e88e5;
            box-shadow: 0 0 5px rgba(30, 136, 229, 0.3);
        }
        .settings-select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            width: 200px;
            background-color: #fff;
            cursor: pointer;
            transition: border-color 0.2s ease;
        }
        .settings-select:focus {
            outline: none;
            border-color: #1e88e5;
            box-shadow: 0 0 5px rgba(30, 136, 229, 0.3);
        }
        .btn-danger {
            background-color: #e53935;
        }
        .btn-danger:hover {
            background-color: #c62828;
        }
        .save-message {
            display: none;
            padding: 12px;
            margin-top: 15px;
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            color: #2e7d32;
            border-radius: 4px;
            font-weight: 500;
        }
        .save-message.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>SafeRoad AI</h2>
        <a href="indeksSaferoad.html">Dashboard</a>
        <a href="#">Incidents</a>
        <a href="#">Reports</a>
        <a href="settings.html" style="color: #fff; background: rgba(255,255,255,0.12);">Settings</a>
    </div>

    <div class="main">
        <div class="topbar">
            <div class="topbar-left"></div>
            <div class="topbar-right">
                <button class="icon-btn" aria-label="Notifications">
                    <i class="fa-regular fa-bell"></i>
                </button>
                <button class="icon-btn" aria-label="Login">
                    <i class="fa-regular fa-user"></i>
                </button>
            </div>
        </div>

        <div class="header">
            <h1>Settings</h1>
        </div>

        <div class="settings-container">
            <!-- Profile Settings -->
            <div class="settings-section">
                <h2><i class="fa-solid fa-user"></i> Profile Settings</h2>
                <div class="settings-group">
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Full Name</h3>
                            <p>Your display name</p>
                        </div>
                        <div class="settings-control">
                            <input type="text" class="settings-input" id="fullName" value="John Doe">
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Email Address</h3>
                            <p>Your email for notifications</p>
                        </div>
                        <div class="settings-control">
                            <input type="email" class="settings-input" id="email" value="john.doe@example.com">
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Phone Number</h3>
                            <p>Your contact number</p>
                        </div>
                        <div class="settings-control">
                            <input type="tel" class="settings-input" id="phone" value="+1 234 567 8900">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notification Settings -->
            <div class="settings-section">
                <h2><i class="fa-solid fa-bell"></i> Notification Preferences</h2>
                <div class="settings-group">
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Email Notifications</h3>
                            <p>Receive notifications via email</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="emailNotifications" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Push Notifications</h3>
                            <p>Receive push notifications in browser</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="pushNotifications" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Incident Alerts</h3>
                            <p>Get notified about new incidents</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="incidentAlerts" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Report Updates</h3>
                            <p>Notifications when reports are updated</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="reportUpdates">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Preferences -->
            <div class="settings-section">
                <h2><i class="fa-solid fa-gear"></i> System Preferences</h2>
                <div class="settings-group">
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Language</h3>
                            <p>Select your preferred language</p>
                        </div>
                        <div class="settings-control">
                            <select class="settings-select" id="language">
                                <option value="en" selected>English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Time Zone</h3>
                            <p>Your local time zone</p>
                        </div>
                        <div class="settings-control">
                            <select class="settings-select" id="timezone">
                                <option value="UTC-5" selected>Eastern Time (UTC-5)</option>
                                <option value="UTC-6">Central Time (UTC-6)</option>
                                <option value="UTC-7">Mountain Time (UTC-7)</option>
                                <option value="UTC-8">Pacific Time (UTC-8)</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Date Format</h3>
                            <p>How dates are displayed</p>
                        </div>
                        <div class="settings-control">
                            <select class="settings-select" id="dateFormat">
                                <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                                <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                            </select>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Auto-refresh</h3>
                            <p>Automatically refresh data</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoRefresh" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Refresh Interval</h3>
                            <p>How often to refresh data</p>
                        </div>
                        <div class="settings-control">
                            <select class="settings-select" id="refreshInterval">
                                <option value="30">30 seconds</option>
                                <option value="60" selected>1 minute</option>
                                <option value="300">5 minutes</option>
                                <option value="600">10 minutes</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Settings -->
            <div class="settings-section">
                <h2><i class="fa-solid fa-shield-halved"></i> Security</h2>
                <div class="settings-group">
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Two-Factor Authentication</h3>
                            <p>Add an extra layer of security</p>
                        </div>
                        <div class="settings-control">
                            <label class="toggle-switch">
                                <input type="checkbox" id="twoFactor">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Change Password</h3>
                            <p>Update your account password</p>
                        </div>
                        <div class="settings-control">
                            <button class="btn" onclick="openPasswordModal()">Change Password</button>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Session Timeout</h3>
                            <p>Automatic logout after inactivity</p>
                        </div>
                        <div class="settings-control">
                            <select class="settings-select" id="sessionTimeout">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Actions -->
            <div class="settings-section">
                <h2><i class="fa-solid fa-user-circle"></i> Account Actions</h2>
                <div class="settings-group">
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Export Data</h3>
                            <p>Download all your data</p>
                        </div>
                        <div class="settings-control">
                            <button class="btn secondary" onclick="exportData()">
                                <i class="fa-solid fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <div class="settings-item">
                        <div class="settings-label">
                            <h3>Delete Account</h3>
                            <p>Permanently delete your account</p>
                        </div>
                        <div class="settings-control">
                            <button class="btn btn-danger" onclick="deleteAccount()">
                                <i class="fa-solid fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Button -->
            <div style="margin-top: 30px; text-align: right;">
                <button class="btn" onclick="saveSettings()" style="padding: 12px 30px; font-size: 16px;">
                    <i class="fa-solid fa-save"></i> Save All Settings
                </button>
                <div class="save-message" id="saveMessage">
                    Settings saved successfully!
                </div>
            </div>
        </div>
    </div>

    <!-- Password Change Modal -->
    <div class="modal" id="passwordModal">
        <div class="modal-content">
            <span class="close" id="closePasswordModal">&times;</span>
            <h2>Change Password</h2>
            <form id="passwordForm">
                <label>Current Password</label>
                <input type="password" name="currentPassword" required>
                
                <label>New Password</label>
                <input type="password" name="newPassword" required>
                
                <label>Confirm New Password</label>
                <input type="password" name="confirmPassword" required>
                
                <button type="submit" class="btn" style="width: 100%; margin-top: 15px;">
                    Update Password
                </button>
            </form>
        </div>
    </div>

    <script>
        // Save settings function
        function saveSettings() {
            // Collect all settings
            const settings = {
                profile: {
                    fullName: document.getElementById('fullName').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value
                },
                notifications: {
                    email: document.getElementById('emailNotifications').checked,
                    push: document.getElementById('pushNotifications').checked,
                    incidents: document.getElementById('incidentAlerts').checked,
                    reports: document.getElementById('reportUpdates').checked
                },
                system: {
                    language: document.getElementById('language').value,
                    timezone: document.getElementById('timezone').value,
                    dateFormat: document.getElementById('dateFormat').value,
                    autoRefresh: document.getElementById('autoRefresh').checked,
                    refreshInterval: document.getElementById('refreshInterval').value
                },
                security: {
                    twoFactor: document.getElementById('twoFactor').checked,
                    sessionTimeout: document.getElementById('sessionTimeout').value
                }
            };

            // Save to localStorage (or send to server)
            localStorage.setItem('safeRoadSettings', JSON.stringify(settings));

            // Show success message
            const saveMessage = document.getElementById('saveMessage');
            saveMessage.classList.add('show');
            setTimeout(() => {
                saveMessage.classList.remove('show');
            }, 3000);
        }

        // Load settings on page load
        function loadSettings() {
            const saved = localStorage.getItem('safeRoadSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                
                // Load profile settings
                if (settings.profile) {
                    if (settings.profile.fullName) document.getElementById('fullName').value = settings.profile.fullName;
                    if (settings.profile.email) document.getElementById('email').value = settings.profile.email;
                    if (settings.profile.phone) document.getElementById('phone').value = settings.profile.phone;
                }
                
                // Load notification settings
                if (settings.notifications) {
                    document.getElementById('emailNotifications').checked = settings.notifications.email !== false;
                    document.getElementById('pushNotifications').checked = settings.notifications.push !== false;
                    document.getElementById('incidentAlerts').checked = settings.notifications.incidents !== false;
                    document.getElementById('reportUpdates').checked = settings.notifications.reports === true;
                }
                
                // Load system settings
                if (settings.system) {
                    if (settings.system.language) document.getElementById('language').value = settings.system.language;
                    if (settings.system.timezone) document.getElementById('timezone').value = settings.system.timezone;
                    if (settings.system.dateFormat) document.getElementById('dateFormat').value = settings.system.dateFormat;
                    document.getElementById('autoRefresh').checked = settings.system.autoRefresh !== false;
                    if (settings.system.refreshInterval) document.getElementById('refreshInterval').value = settings.system.refreshInterval;
                }
                
                // Load security settings
                if (settings.security) {
                    document.getElementById('twoFactor').checked = settings.security.twoFactor === true;
                    if (settings.security.sessionTimeout) document.getElementById('sessionTimeout').value = settings.security.sessionTimeout;
                }
            }
        }

        // Password modal functions
        function openPasswordModal() {
            document.getElementById('passwordModal').style.display = 'block';
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordForm').reset();
        }

        // Export data function
        function exportData() {
            const settings = localStorage.getItem('safeRoadSettings');
            const dataStr = JSON.stringify(settings ? JSON.parse(settings) : {}, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'safeRoad-data-export.json';
            link.click();
            URL.revokeObjectURL(url);
        }

        // Delete account function
        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                if (confirm('This will permanently delete all your data. Are you absolutely sure?')) {
                    alert('Account deletion requested. Please contact support to complete this process.');
                }
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();

            // Password modal handlers
            const passwordModal = document.getElementById('passwordModal');
            const closePasswordBtn = document.getElementById('closePasswordModal');
            const passwordForm = document.getElementById('passwordForm');

            if (closePasswordBtn) {
                closePasswordBtn.onclick = closePasswordModal;
            }

            window.onclick = function(event) {
                if (event.target == passwordModal) {
                    closePasswordModal();
                }
            }

            passwordForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const newPassword = this.newPassword.value;
                const confirmPassword = this.confirmPassword.value;

                if (newPassword !== confirmPassword) {
                    alert('New passwords do not match!');
                    return;
                }

                if (newPassword.length < 8) {
                    alert('Password must be at least 8 characters long!');
                    return;
                }

                alert('Password updated successfully!');
                closePasswordModal();
            });
        });
    </script>
</body>
</html>


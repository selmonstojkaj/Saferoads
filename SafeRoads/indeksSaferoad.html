<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="cssSaferoads.css">
    <!-- Font Awesome Free CDN -->
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
/>


<script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>


    <script src="jsSaferoads.js"></script>
    <title>SafeRoad AI</title>
</head>
<body>
    <div class="sidebar">
        <h2>SafeRoad AI </h2>
        <a href="#">Dashboard</a>
        <a href="#">Incidents</a>
        <a href="#">Reports</a>
        <a href="#">Settings</a>
    </div>

    <div class="main">
        <div class="topbar">
  <div class="topbar-left"></div>
  <div class="topbar-right">
    <button class="icon-btn" aria-label="Notifications">
      <i class="fa-regular fa-bell"></i>
    </button>
    <button class="icon-btn" aria-label="Login">
      <i class="fa-regular fa-user"></i>
    </button>
  </div>
</div>
        <div class="header">
            <h1>Reports & Analytics</h1>
            <div class="export-buttons">
                <button class="btn" id="citizenReportBtn">Citizen Report</button>
                <button class="btn">
                    <i class="fa-solid fa-file-pdf"></i>Export PDF
                </button>
            </div>
        </div>

        <!-- Citizen Report Modal -->
        <div class="modal" id="citizenReportModal">
            <div class="modal-content">
                <span class="close" id="closeReportModal">&times;</span>
                <h2> Citizen Reporting Form</h2>
                <form id="reportForm">
                    <h3> Reporter's Basic Information</h3>
                    <label>Full Name</label>
                    <input type="text" name="name" autocomplete="name" required>

                    <label>Phone Number</label>
                    <input type="tel" name="phone" autocomplete="tel" required>

                    <label>Email (optional)</label>
                    <input type="email" name="email" autocomplete="email">

                    <label>Do you want to remain anonymous?</label>
                    <select name="anonymous">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>

                    <h3> Incident Location</h3>
                    <label>Exact Address</label>
                    <input type="text" name="address" required>

                    <label>City</label>
                    <input type="text" name="city" required>

                    <label>Date and Time of Incident</label>
                    <input type="datetime-local" name="datetime" required>

                    <h3> Type of Incident</h3>
                    <select name="type" required>
                        <option value="Traffic Accident">Traffic Accident</option>
                        <option value="Security Incident">Security Incident</option>
                        <option value="Noise / Public Disturbance">Noise / Public Disturbance</option>
                        <option value="Property Damage">Property Damage</option>
                        <option value="Medical Assistance">Medical Assistance</option>
                        <option value="Fire / Danger">Fire / Danger</option>
                        <option value="Something else">Something else</option>
                    </select>

                    <h3> Incident Description</h3>
                    <textarea name="description" rows="5" placeholder="Describe what you saw..." required></textarea>

                    <h3> Documents & Media (Optional)</h3>
                    <input type="file" name="files" multiple>

                    <h3> Did you witness the person or incident directly?</h3>
                    <select name="direct" required>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>

                    <h3> Urgency Level</h3>
                    <select name="urgency" required>
                        <option value="Not urgent">Not urgent</option>
                        <option value="Urgent">Urgent</option>
                        <option value="Very urgent">Very urgent</option>
                    </select>

                    <button type="submit" class="btn">Submit Report</button>
                </form>
                <div class="thankyou" id="thankyou" style="display:none;">
                    Thank you! Your report will be reviewed by authorized staff.
                </div>
            </div>
        </div>

        <div class="modal" id="reportModal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Write Report</h2>
                <textarea  id="reportText" placeholder="Type your report here..."></textarea>
                <button id="saveReport" class="btn">Save Report</button>
            </div>
        </div>

        <p>Comprehensive incidents statistics & insights</p>

        <div class="grid">
            <div class="card"><h3>Total incidents (30 days)</h3> <p>482</p></div>
            <div class="card"><h3>Avg response Time</h3><p>4.2 min</p></div>
            <div class="card"><h3>Resolution Rate</h3><p>94.5%</p></div>
            <div class="card"><h3>Ai Accuracy</h3><p>92.7%</p></div>
        </div>
        <div class="section">
            <h2>Incidents Over Time</h2>
            <canvas id="incidentsChart" height="40"></canvas>
        </div>

        <div class="section">
            <h2>Incident Types Distribution</h2>
            <canvas id="pieChart" height="40"></canvas>  
    </div>

    <div class="section">
        <h2>High-Risk Areas</h2>
        <canvas id="barChart" height="40"></canvas>
    </div>
     <div class="section">
        <h2>Detailed High-Risk Areas</h2>
        <table>
            <tr>
                <th>Rank</th>
                <th>Location</th>
                <th>Incidents</th>
                <th>Severity</th>
            </tr>
            <tr><td>#1</td><td>Highway 000, Exit 20</td><td>34</td><td>8.5/10</td></tr>
            <tr><td>#2</td><td>Main Street, 5th Ave</td><td>20</td><td>6.8/10</td></tr>
            <tr><td>#3</td><td>I-200</td><td>18</td><td>6.8/10</td></tr>
            <tr><td>#4</td><td>DownTown</td><td>19</td><td>7.3/10</td></tr>
        </table>
     </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Citizen Report Modal
            let citizenModal = document.getElementById('citizenReportModal');
            let citizenBtn = document.getElementById('citizenReportBtn');
            let closeReportBtn = document.getElementById('closeReportModal');
            let reportForm = document.getElementById('reportForm');
            let thankyouMsg = document.getElementById('thankyou');

            // Open citizen report modal
            if (citizenBtn) {
                citizenBtn.onclick = function() {
                    citizenModal.style.display = 'block';
                }
            }

            // Close citizen report modal
            if (closeReportBtn) {
                closeReportBtn.onclick = function() {
                    citizenModal.style.display = 'none';
                    thankyouMsg.style.display = 'none';
                    reportForm.reset();
                }
            }

            // Close citizen report modal when clicking outside
            window.onclick = function(event) {
                if (event.target == citizenModal) {
                    citizenModal.style.display = 'none';
                    thankyouMsg.style.display = 'none';
                    reportForm.reset();
                }
            }

            // Handle form submission
            reportForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const urgency = this.urgency.value;
                if(urgency === "Very urgent") {
                    alert("This incident is very urgent. We recommend calling the emergency number!");
                }
                this.reset();
                thankyouMsg.style.display = 'block';
            });
        });
    </script>

  
</body>
</html>